### üîê Testes de Autentica√ß√£o

### Vari√°veis
@baseUrl = http://localhost:4000/api
@accessToken = seu-token-aqui

@userId = seu-user-id-aqui

### ============================================
### 1Ô∏è‚É£ REGISTRAR NOVO USU√ÅRIO
### ============================================
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "davicampos@tuta.io",
  "password": "senha123",
  "username": "Davi Campos"
}

### Resposta esperada:
# {
#   "user": {
#     "id": "uuid",
#     "email": "teste@example.com",
#     "username": "Usu√°rio Teste",
#     "credits": 10000
#   },
#   "accessToken": "eyJhbGc..."
# }
# Cookie: refresh_token (HttpOnly)

### ============================================
### 2Ô∏è‚É£ LOGIN
### ============================================
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "davicampos@tuta.io",
  "password": "senha123"
}

### Resposta esperada: mesma estrutura do registro

### ============================================
### 3Ô∏è‚É£ OBTER DADOS DO USU√ÅRIO (/me)
### ============================================
GET {{baseUrl}}/auth/me
Authorization: Bearer {{accessToken}}

### Resposta esperada:
# {
#   "user": {
#     "id": "uuid",
#     "email": "teste@example.com",
#     "username": "Usu√°rio Teste",
#     "credits": 10000
#   }
# }

### ============================================
### 4Ô∏è‚É£ REFRESH TOKEN
### ============================================
# O cookie refresh_token √© enviado automaticamente
POST {{baseUrl}}/auth/refresh

### Resposta esperada:
# {
#   "accessToken": "eyJhbGc..."
# }
# Cookie: refresh_token (atualizado)

### ============================================
### 5Ô∏è‚É£ LOGOUT
### ============================================
POST {{baseUrl}}/auth/logout

### Resposta esperada:
# {
#   "ok": true
# }
# Cookie: refresh_token removido

### ============================================
### üö´ TESTES DE ERRO
### ============================================

### Registro com email duplicado (409 Conflict)
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "teste@example.com",
  "password": "senha123",
  "username": "Outro Nome"
}

### Login com senha incorreta (401 Unauthorized)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "teste@example.com",
  "password": "senhaerrada"
}

### Acesso sem token (401 Unauthorized)
GET {{baseUrl}}/auth/me

### Acesso com token inv√°lido (401 Unauthorized)
GET {{baseUrl}}/auth/me
Authorization: Bearer token-invalido

### Refresh sem cookie (401 Unauthorized)
POST {{baseUrl}}/auth/refresh
